<div class="content-wrapper" id="content-wrapper">
        
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      {{'TICKET.TICKET_LIST' | translate}}
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> {{'GENERAL.LAND_PAGE' | translate}}</a></li>
        <li class="active">{{'TICKET.TICKET_LIST' | translate}}</li>
      </ol>
  </section>

  <!-- Main content -->
  <section class="content">
      <div class="row">
        <!-- tabs -->
        <div class="col-xs-12 nav-tabs-custom">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#ticket-list" data-toggle="tab">{{'GENERAL.MENU' | translate}} </a></li>
            <li><a href="#open-ticket" data-toggle="tab"><i class="fa fa-plus"></i> {{'TICKET.OPEN_TICKET' | translate}}</a></li>
          </ul>
          <div class="tab-content">
            <div class="active tab-pane" id="ticket-list">
            <div class="row">
                <div class="col-lg-3">
                    <div class="box box-solid">
                      <div class="box-header with-border bg-default">
                        <h3 class="box-title text-green">{{'TICKET.FILTER' | translate}}</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                          </div>
                      </div><!-- /.box-header -->
                      <div class="box-body">
                          <form [formGroup] ="ticketSearchForm" (ngSubmit) = "ticketSearch()" class="form-horizontal">
                            <div class="form-group">
                              <div class="col-sm-12">
                                <label for="inputAgent" class="control-label">{{'GENERAL.ASSIGNED_EMPLOYEE' | translate}}</label>
                                <div class=""><!-- add class "has-success" for validation-->
                                  <input type="text" class="form-control" id="inputAgent" [placeholder]="'GENERAL.ASSIGNED_EMPLOYEE'| translate">
                                  <!-- <label class="control-label" for="inputSuccess"><i class="fa fa-check"></i>تم الأدخال بنجاح</label> -->
                                </div>
                              </div><!-- /.col-->
                            </div><!-- /.form-group -->
                       
                            <div class="form-group">
                              <div class="col-sm-12">
                                <label class="control-label">{{'TICKET.DELIVER_Time' | translate}}</label><!-- add class "has-success" for validation-->
                                <input class="form-control" (click)="creationDate.toggle()" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker  #creationDate="ngbDatepicker">

                                  <!-- <label class="control-label" for="inputSuccess"><i class="fa fa-check"></i>تم الأدخال بنجاح</label> -->
                              </div><!-- /.col-->
                            </div><!-- /.form-group -->
                            <div class="form-group">
                                <div class="col-sm-12">
                                  <label for="inputDue" class="control-label">{{'TICKET.DUE_TIME' | translate}}</label>
                                  <div class=""><!-- add class "has-error" for validation-->
                                    <div class="custom-control custom-checkbox">

                                      <input  class="form-control" (click)="dp.toggle()" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker #dp="ngbDatepicker">

                                    </div>
                                    <!-- <label class="control-label" for="inputError"><i class="fa fa-times-circle-o"></i>خطأ في الأدخال</label> -->
                                  </div>
                                </div><!-- /.col-->
                              </div><!-- /.form-group -->
                              <div class="form-group">
                                <div class="col-sm-12">
                                  <label for="inputAgent" class="control-label" > {{'TICKET.FILE_NUM' | translate}}</label>
                                  <div class=""><!-- add class "has-success" for validation-->
                                    <input type="text" class="form-control" formControlName="file_number" [placeholder]="'TICKET.FILE_NUM' | translate">
                                    <!-- <label class="control-label" for="inputSuccess"><i class="fa fa-check"></i>تم الأدخال بنجاح</label> -->
                                  </div>
                                </div><!-- /.col-->
                              </div><!-- /.form-group -->
                              <div class="form-group">
                                <div class="col-sm-12">
                                  <label for="inputStatus" class="control-label"> {{'GENERAL.STATUS' | translate}}</label>
                                  <div class=""><!-- add class "has-success" for validation-->
                                    <!-- <input type="text" class="form-control" id="inputStatus" placeholder=" الحالة"> -->
                                    <!-- <label class="control-label" for="inputSuccess"><i class="fa fa-check"></i>تم الأدخال بنجاح</label> -->
                                  
                                    <select formControlName="status_id" class="form-control">
                                      <option selected="" [ngValue]="null" disabled>{{'TICKET.CHOSE_STATUS' | translate}}</option>
                                      <option *ngFor="let status of statuses" value="{{status.id}}"> {{status.title_ar}}</option>
  
                                    </select>
                                  

                                  </div>
                                </div><!-- /.col-->
                              </div><!-- /.form-group -->
                              <div class="form-group">
                                  <div class="col-sm-12">
                                    <label for="inputPriority" class="control-label">{{'GENERAL.IMPORTANCE' | translate}}</label>
                                    <div class=""><!-- add class "has-error" for validation-->
                                      
                                      <div class="custom-control custom-checkbox" *ngFor="let prioritiy of priorities">
                                        <input type="radio" class="custom-control-input" style="margin:0px 5px;" formControlName="priority_id" value="{{prioritiy.id}}">
                                        <label class="custom-control-label" for="check1">{{prioritiy.title_ar}}</label>
                                      </div>
                                      
                                      <!-- <label class="control-label" for="inputError"><i class="fa fa-times-circle-o"></i>خطأ في الأدخال</label> -->
                                    </div>
                                  </div><!-- /.col-->
                                </div><!-- /.form-group -->
                              <div class="form-group">
                                <div class="col-sm-12">
                                  <label for="inputType" class="control-label">{{'GENERAL.GENDER' | translate}}</label>
                                  <select class="form-control" formControlName="ticket_type_id">
                                    <option selected="" [ngValue]="null">{{'GENERAL.CHOSE_TYPE' | translate}}</option>
                                    <option *ngFor="let type of ticketTypes" value="{{type.id}}"> {{type.title_ar}}</option>

                                  </select>
                                
                                </div><!-- /.col-->
                              </div><!-- /.form-group -->
                              <div class="form-group">
                                <div class="col-sm-12">
                                  <label for="inputSource" class="control-label">{{'TICKET.SOURCE' | translate}}</label>
                                    <select class="form-control" formControlName="source_id">
                                      <option selected="" [ngValue]="null">{{'TICKET.CHOSE_TICKET_SOURCE' | translate}}</option>
                                      <option *ngFor="let source of sources" value="{{source.id}}"> {{source.title_ar}}</option>
                                    </select>
                                </div><!-- /.col-->
                              </div><!-- /.form-group -->
                              
                              <div class="col-xs-12">
                                <div class="col-xs-12 col-md-12 col-lg-12 mb-5">
                                    <button (click)="emptySearchForm()" type="reset" class="btn bg-gray-dark w-100">{{'GENERAL.CLEAR_BTN' | translate}}</button>                          
                                </div>
                                <div class="col-xs-12 col-md-12 col-lg-12">
                                  <button type="submit"  class="btn btn-success w-100 mb-5">{{'GENERAL.FILTER_BTN' | translate}}</button>                           
                                
                                </div>
                              </div>
                              
                          </form>
                      </div><!-- /.box-body -->
                    </div><!-- /.box -->
                </div><!-- /.col -->
                <div class="col-lg-9">
                    <div class="box box-solid">
                      <div class="box-header with-border bg-default">
                        <h3 class="box-title text-green">{{'TICKET.TICKET' | translate}}</h3>
                        <div class="box-tools pull-right">
                          <div class="has-feedback">
                            <form [formGroup] ="ticketSearchByIdForm" (ngSubmit) = "ticketSearchById()">
                                <input formControlName="id" type="text" class="form-control input-sm" [placeholder]="'GENERAL.SEARCH' | translate">
                                <button type="submit"class="search-ticket-btn" ><i class="fa fa-search" aria-hidden="true"></i></button>
                              
                              </form>
                     
                          </div>
                        </div>
                      </div><!-- /.box-header -->
                      <div class="box-header with-border bg-gray-light">
                        <div class="inline-block margin-r-20">
                          <p>{{'TICKET.OPEND_TICKETS_NOW' | translate}}</p>
                          <span class="label label-default">{{'GENERAL.YOU' | translate}}: <b>06</b></span>
                          <span class="label label-default">{{'GENERAL.GROUPS' | translate}}: <b>06</b></span>
                        </div>
                        <div class="inline-block">
                          <p>إحصائيات التذاكر (هذا الاسبوع)</p>
                          <span class="label label-default">{{'GENERAL.GOOD' | translate}}: <b>00</b></span>
                          <span class="label label-default">{{'GENERAL.BAD' | translate}}: <b>00</b></span>
                          <span class="label label-default">{{'TICKET.DONE' | translate}}: <b>06</b></span>
                        </div>
                      </div><!-- /.box-header -->
                      <!-- delete actin alert modal -->
                      <!-- hand over ticket modal -->
                      <div class="modal fade" id="exampleModalCenter" *ngIf="handOverModal" style="display:block" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                          <div class="modal-content">
                            <div class="modal-header bg-default">
                              <h5 class="modal-title text-green" id="exampleModalCenterTitle">{{'TICKET.DELIVER_TO' | translate}}</h5>
                              <button (click)="closeHandOverModal()" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            
                            <div class="modal-body" style="height: unset;" *ngIf="!handOverSpinner && !handOverDone">
                              <div class="radio radio-inline" style="padding-right: 0;margin-top:0;">
                                <label>
                                  <input type="radio" name="subClient" required value="user" (change)="selectHandOver($event.target.value)">
                                  {{'USERS.USER_nameless' | translate}}
                                </label>
                              </div>
                      
                              <div class="radio radio-inline">
                                  <label>
                                    <input type="radio" name="subClient" required value="gorup" (change)="selectHandOver($event.target.value)">
                                    {{'USERS.GROUP_nameless' | translate}}
                                  </label>
                                </div>
                            </div>
                            <form class="hand-over-form" [formGroup]="handOverForm" *ngIf="groupHandOver" (ngSubmit)="groupHandOverSubmit(handOverForm.value)" style="margin-top:12px;">
                              <img *ngIf ="handOverSpinner" src="../../../../assets/img/loader.gif" alt="">
                              <h3 *ngIf="handOverDone">{{'MESSAGES.TICKET_DELIVER_SUCCESS' | translate}}</h3>
                              <div  *ngIf="!handOverSpinner && !handOverDone" class="form-group">
                                  <select class="form-control" formControlName="role_id">
                                      <option [ngValue]="null" disabled>{{'GENERAL.TO' | translate}}</option>
                                      <option *ngFor="let role of roles" value="{{role.id}}">{{role.name}}</option>
                                    </select>
                              </div>

                           
                            <div class="modal-footer">
                              <button type="button" type="submit" *ngIf="!handOverSpinner && !handOverDone" [disabled]="!handOverForm.valid" class="btn btn btn-success">{{'GENERAL.SAVE' | translate}}</button>
                              <button type="button" class="btn bg-gray-dark"(click)="closeHandOverModal()" data-dismiss="modal">{{'GENERAL.CLOSE' | translate}}</button>

                            </div>
                          </form>

                          <form class="hand-over-form" [formGroup]="userhandOverForm" *ngIf="userHandOver" (ngSubmit)="userHandOverSubmit(userhandOverForm.value)" style="margin-top:12px;">
                            <img *ngIf ="handOverSpinner" src="../../../../assets/img/loader.gif" alt="">
                            <h3 *ngIf="handOverDone">{{'MESSAGES.TICKET_DELIVER_SUCCESS' | translate}}</h3>
                            <div *ngIf="!handOverSpinner && !handOverDone" class="form-group">
                                <select class="form-control" formControlName="user_ids">
                                    <option [ngValue]="null" disabled>{{'GENERAL.TO' | translate}}</option>
                                    <option *ngFor="let user of users" value="{{user.id}}">{{user.name}}</option>
                                  </select>
                            </div>

                         
                          <div class="modal-footer">
                            <button type="button" type="submit" *ngIf="!handOverSpinner && !handOverDone" [disabled]="!userhandOverForm.valid" class="btn btn btn-success">{{'GENERAL.SAVE' | translate}}</button>
                            <button type="button" class="btn bg-gray-dark"(click)="closeHandOverModal()" data-dismiss="modal">{{'GENERAL.CLOSE' | translate}}</button>

                          </div>
                        </form>

                          </div>
                        </div>
                      </div>
                        <!-- end of hand over ticket modal -->
                        <!-- export tickets modal -->
                        <ng-template #exportModal let-modal>
                          <div class="modal-header bg-default">
                            <h4 class="modal-title text-green" id="exampleModalLabel">{{'TICKET.EXPORT' | translate}}</h4>
                            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <h3 class="finish-message" *ngIf="exportdone">{{'GENERAL.EXPORT_DONE' | translate}}</h3>
                          <form *ngIf="!exportdone" [formGroup] ="exportForm" (ngSubmit) = "exportClients()">
                          <div class="modal-body" style="height: auto;">
                           
                                <div class="form-group" >
                                    <!-- radio -->
                                    <label class="col-sm-4 control-label">{{'GENERAL.FILE_EXT' | translate}}<i class="text-red fa fa-asterisk text-xs"></i></label>
                                    <div class="col-sm-8">
                                      <div class="radio radio-inline" style="margin-top:0">
                                        <label>
                                          <input type="radio" formControlName="extension" value="pdf">
                                          pdf
                                        </label>
                                      </div>
                                      <div class="radio radio-inline">
                                        <label>
                                          <input type="radio" formControlName="extension" value="xlsx">
                                          xlsx
                                        </label>
                                      </div>
                                    </div>
                              </div>
                          </div>
                            <div class="modal-footer">
                              <button type="submit" class="btn btn-success" [disabled]="!exportForm.valid">{{'GENERAL.EXPORT' | translate}}</button>
                              <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">{{'GENERAL.CLOSE' | translate}}</button>
                            </div>
                            </form>
                            <div class="modal-footer" *ngIf="exportdone">
                                <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">{{'GENERAL.CLOSE' | translate}}</button>
                            </div>
                        </ng-template>

                      <div class="box-body">
                          <form #ticketsForm = "ngForm" (ngSubmit) = "ticketsActions(ticketsForm,$event)">
                          <div *ngIf="isGranted('Add Ticket')" class=" col-xs-12 no-padding margin">
                            <a routerLink="/tickets/add-ticket" class="btn btn-success"> {{'TICKET.ADD_TICKET' | translate}}</a>
                          </div>
                          <div class="mailbox-controls">
                            <!-- Check all button -->
                            <button *ngIf="!filterdTicketsShow" class="btn btn-default btn-sm checkbox-toggle" (click)="selectAll()" data-toggle="tooltip" [title]="'GENERAL.CHOSE_ALL' | translate"><i class="fa fa-square-o"></i></button>
                            <button *ngIf="filterdTicketsShow"class="btn btn-default btn-sm checkbox-toggle" (click)="selectAllFilterd()" data-toggle="tooltip" [title]="'GENERAL.CHOSE_ALL' | translate"><i class="fa fa-square-o"></i></button>
                            
                            <div class="btn-group">
                              <button *ngIf="isGranted('Delete Ticket')" class="btn btn-default btn-sm" type="submit" id="delete" data-toggle="tooltip" [title]="'GENERAL.DELETE_BTN' | translate"><i class="fa fa-trash-o"></i>
                              </button>
                              <button *ngIf="isGranted('Close Ticket')" class="btn btn-default btn-sm"  type="button" id="close" data-toggle="tooltip" (click)="closeTicket(closeContent, closeSuccesscontent, selectTicketsContent)" [title]="'GENERAL.CLOSE' | translate"><i class="fa fa-lock"></i></button>
                              <button *ngIf="isGranted('Assign Ticket')" class="btn btn-default btn-sm" type="submit" id="assign" data-toggle="tooltip" [title]="'TICKET.DELIVER_TO' | translate"><i class="fa fa-share"></i></button>
                              <button *ngIf="isGranted('Merge Ticket')" class="btn btn-default btn-sm" (click)="openMergePopup()" data-toggle="tooltip" [title]="'TICKET.MERGE' | translate" type="button"><i class="fa fa-object-group"></i></button>
                              <button class="btn btn-default btn-sm" data-toggle="tooltip" [title]="'TICKET.SEQUENTIAL_OPERATION' | translate"><i class="fa fa-play"></i></button>
                              <button  class="btn btn-default btn-sm"  [disabled]="!filterdTicketsShow" (click)="opendExportModal(exportModal)" data-toggle="tooltip" [title]="'TICKET.EXPORT' | translate"><i class="fa fa-download"></i></button>
                              <button *ngIf="isGranted('Import Ticket')" class="btn btn-default btn-sm" data-toggle="tooltip" [title]="'TICKET.IMPORT' | translate"><i class="fa fa-upload"></i></button>
                              <button class="btn btn-default btn-sm" data-toggle="tooltip" title="إعادة تحميل"><i class="fa fa-refresh"></i></button>
                            </div><!-- /.btn-group -->
                            <!-- <div class="pull-right arrows-block">
                              1-50/200
                              <div class="btn-group">
                                <button class="btn btn-default btn-sm"><i class="fa fa-chevron-right"></i></button>
                                <button class="btn btn-default btn-sm"><i class="fa fa-chevron-left"></i></button>
                              </div>
                            </div> -->
                          </div><hr/>
                         <!-- delete ticket alert -->
                         <div class="modal fade" *ngIf="showDeleteAlert" style="display:block" id="staticBackdrop" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header bg-danger">
                                    <h4 class="modal-title text-red" id="exampleModalLabel">{{'TICKET.DELETE_TICKET' | translate}}</h4>
                                    <button (click)="closeDeleteTicketModal()" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                      <span aria-hidden="true">×</span>
                                    </button>
                                  </div>
                                <div class="modal-body" style="height: auto">
                                 <h3>{{'MESSAGES.SURE_DELETE_TICKET' | translate}}</h3>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" (click)="deleteTickets()" class="btn btn-danger">{{'GENERAL.CONFIRM' | translate}}</button>
                                  <button type="button" (click)="closeDeleteTicketModal()" class="btn btn-secondary" data-dismiss="modal">{{'GENERAL.CLOSE' | translate}}</button>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- end of delete ticket alert -->
                          <div class="table-responsive mailbox-messages">

                            <table *ngIf="isGranted('Edit Ticket')" class="table table-hover table-striped">
                                <thead class="bg-gray-dark">
                                    <tr>
                                      <th></th>
                                      <th>{{'GENERAL.IMPORTANCE' | translate}}</th>
                                      <th>{{'BENEFICIARIES.BENEFICIARY_NAME' | translate}}</th>
                                      <th>{{'TICKET.TICKET_NUM_TYPE' | translate}}</th>
                                      <th>{{'TICKET.TICKET_TYPE' | translate}}</th>
                                      <th>{{'TICKET.RESPONSIBLE_EMPLOYEE' | translate}}</th>
                                      <th>{{'TICKET.LAST_UPDATE' | translate}}</th>
                                    </tr>
                                </thead>
                              <tbody *ngIf="!filterdTicketsShow">
                                    <tr *ngFor="let ticket of ticketObjectWithPagintation ;let i = index"style="cursor: pointer;">
                                        <td><input [(ngModel)]="selectAllTickets"  name="{{ticket.id}}" type="checkbox" (click)="selectTickets(ticket)" value="{{ticket.id}}"></td>
                                        <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-star"><span [style.background]="ticket.priority.color" class="label label-success pull-left round-widget-sm" data-toggle="tooltip" title="الاهميه: {{ticket.priority.title_ar}}"></span></td>
                                        <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-name">{{ticket.client.name}}</td>
                                        <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-subject"><a [routerLink]="['/tickets/add-ticket',ticket.id]"><b>{{ticket.ticket_type.title_ar}}</b></a> -#{{ticket.id}}</td>
                                        <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-date"><span>{{ticket.status.title_ar}}</span></td>
                                        <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-name"><span *ngIf="ticket.assigned_user">{{ticket.assigned_user.name}}</span></td>
                                        <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-date text-gray"><span>{{ticket.updated_at}}</span></td>
                                    </tr>  
                              </tbody>
                              <tbody *ngIf="filterdTicketsShow">
                                <tr *ngFor="let ticket of filterdTicketResponse.data ;let i = index"style="cursor: pointer;">
                                    <td><input [(ngModel)]="selectAllTicketsFilterd" name="{{ticket.id}}" type="checkbox" (click)="selectTickets(ticket)" value="{{ticket.id}}"></td>
                                    <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-star"><span [style.background]="ticket.priority.color" class="label label-success pull-left round-widget-sm" data-toggle="tooltip" title="الاهميه: {{ticket.priority.title_ar}}"></span></td>
                                    <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-name">{{ticket.client.name}}</td>
                                    <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-subject"><a [routerLink]="['/tickets/add-ticket',ticket.id]"><b>{{ticket.ticket_type.title_ar}}</b></a> -#{{ticket.id}}</td>
                                    <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-date"><span>{{ticket.status.title_ar}}</span></td>
                                    <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-name"><span *ngIf="ticket.assigned_user">{{ticket.assigned_user.name}}</span></td>
                                    <td [routerLink]="['/tickets/add-ticket',ticket.id]" class="mailbox-date text-gray"><span>{{ticket.updated_at}}</span></td>
                                </tr>  
                              </tbody>                              
                              
                            </table>

                            <!-- <table *ngIf="!isGranted('Edit Ticket')" class="table table-hover table-striped">
                              <thead class="bg-gray-dark">
                                  <tr scope="row">
                                    <th></th>
                                    <th>{{'GENERAL.IMPORTANCE' | translate}}</th>
                                    <th>{{'BENEFICIARIES.BENEFICIARY_NAME' | translate}}</th>
                                    <th>{{'TICKET.TICKET_NUM_TYPE' | translate}}</th>
                                    <th>{{'TICKET.TICKET_TYPE' | translate}}</th>
                                    <th>{{'TICKET.RESPONSIBLE_EMPLOYEE' | translate}}</th>
                                    <th>{{'TICKET.LAST_UPDATE' | translate}}</th>
                                  </tr>
                              </thead>
                            <tbody *ngIf="refresh">
                                  <tr *ngFor="let ticket of ticketObjectWithPagintation;let i = index" style="cursor: pointer;">
                                      <td><input ngModel name="{{ticket.id}}" type="checkbox" (click)="selectTickets(ticket)" value="{{ticket.id}}"></td>
                                      <td class="mailbox-star">
                                        <span [style.background]="ticket.priority.color" class="label label-success pull-left round-widget-sm" data-toggle="tooltip" [title]="'TICKET.LAST_UPDATE' | translate">:{{ticket.priority.title_ar}}</span></td>
                                      <td class="mailbox-name">{{ticket.client.name}}</td>
                                      <td class="mailbox-subject"><b>{{ticket.ticket_type.title_ar}}</b> -#{{ticket.id}}</td>
                                      <td class="mailbox-date"><span>{{ticket.status.title_ar}}</span></td>
                                      <td class="mailbox-name"><span *ngIf="ticket.assigned_user">{{ticket.assigned_user.name}}</span></td>
                                      <td class="mailbox-date text-gray"><span>{{ticket.updated_at}}</span></td>
                                  </tr>  
                            </tbody> -->
                            
                          <!-- </table> -->

                          </div><!-- /.mail-box-messages -->
                          <h4 *ngIf="noResult">{{'MESSAGES.NO_SEARCH_RESULT' | translate}} </h4>
                        </form>
                        <ngb-pagination *ngIf="!filterdTicketsShow" [collectionSize]="ticketResponse.meta.total" [rotate]="true" [maxSize]="paginationMaxSize" class="pull-right"
                      [pageSize] = "ticketResponse.meta.per_page" (pageChange)="changeTicketsPage($event)" [(page)]="ticketResponse.meta.current_page" aria-label="Default pagination"></ngb-pagination>

                      <ngb-pagination *ngIf="filterdTicketsShow" [collectionSize]="filterdTicketResponse.meta.total" [rotate]="true" [maxSize]="paginationMaxSize" class="pull-right"
                      [pageSize] = "filterdTicketResponse.meta.per_page" (pageChange)="changeFilterdTicketsPage($event)" [(page)]="filterdTicketResponse.meta.current_page" aria-label="Default pagination"></ngb-pagination>
                    </div><!-- /.box-body -->
                    </div><!-- /.box -->
                </div><!-- /.col -->
            </div>  
            </div><!-- /.tab-pane -->

            <div class="tab-pane" id="open-ticket"> 
              <div class="alert alert-info alert-dismissable">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                <h4><i class="icon fa fa-info"></i> {{'GENERAL.INFORMATION' | translate}}</h4>
                {{'MESSAGES.DRAG_DROP_TICKET' | translate}}
              </div>
            </div><!-- /.tab-pane -->
            
          </div><!-- /.tab-content -->
        </div><!-- /.nav-tabs-custom -->
    </div><!-- /.row -->

      
  </section><!-- /.content -->
</div><!-- /.content-wrapper -->  

<merge-ticket (modalSave)="refreshTickets()" #mergeTickets>  

</merge-ticket>

<ng-template #closeContent let-modal>
  <div class="modal-header" style="background:#009B86 ">
    <h4 class="modal-title" id="modal-basic-title" style="color:white">{{'GENERAL.CONFIRMATION_MSG' | translate}}</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body"style="height: 100px !important;">
        <label>{{'MESSAGES.CLOSE_TICKET_CONFIRMATION' | translate}}</label>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save')">{{'GENERAL.YES' | translate}}</button>
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Cancel')">{{'GENERAL.CANCEL' | translate}}</button>
  </div>
</ng-template>


<ng-template #closeSuccesscontent let-modal>
  <div class="modal-header" style="background:#009B86 ">
    <h4 class="modal-title" id="modal-basic-title" style="color:white">{{'MESSAGES.SUCCESS_WORK' | translate}}</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body"style="height: 100px !important;">
        <label>
          {{'MESSAGES.CLOSE_TICKET_SUCCESS' | translate}}  
        </label>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save')">{{'GENERAL.DONE' | translate}}</button>
  </div>
</ng-template>


<ng-template #selectTicketsContent let-modal>
  <div class="modal-header" style="background:#009B86 ">
    <h4 class="modal-title" id="modal-basic-title" style="color:white">{{'GENERAL.CAUTION' | translate}}</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body"style="height: 100px !important;">
        <label>
          {{'MESSAGES.CHOSE_TICKET_FIRST' | translate}} 
        </label>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save')">{{'GENERAL.DONE' | translate}}</button>
  </div>
</ng-template>